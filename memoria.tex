\documentclass[a4paper,11pt]{book}

\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}\decimalpoint

\usepackage{graphicx}
    \graphicspath{{resources/}}
\usepackage{subcaption}
\usepackage{pdflscape}

\usepackage{dcolumn}
    \newcolumntype{.}{D{.}{\esperiod}{-1}}
    \makeatletter
    \addto\shorthandsspanish{\let\esperiod\es@period@code}
    \makeatother
    \RequirePackage{verbatim}
\usepackage{fancyhdr}
    \pagestyle{fancy}
    \fancyhf{}
    \fancyhead[LO]{\leftmark}
    \fancyhead[RE]{\rightmark}
    \fancyhead[RO,LE]{\textbf{\thepage}}
\usepackage{afterpage}
\usepackage{longtable}
    \usepackage{array}
% \usepackage{float}  % Placeins alternative
%     \restylefloat{table}

\usepackage[section]{placeins}
    \makeatletter  % Adds placeins functionality to subsections
    \AtBeginDocument{%
        \expandafter\renewcommand\expandafter\subsection\expandafter{%
            \expandafter\@fb@secFB\subsection
        }%
    }
    \makeatother

\usepackage{amsmath}
\usepackage{eurosym}
    \DeclareUnicodeCharacter{20AC}{\euro}

\usepackage[x11names]{xcolor}

\usepackage{hyperref}
    \hypersetup{
        colorlinks = true,
        linkcolor = OrangeRed3,
        urlcolor = RoyalBlue3,
        citecolor = Chartreuse4,
        %
        pdfauthor = {Jose Manuel García Cazorla (jmgarcaz@correo.ugr.es)},
        pdftitle = {Aplicación de control para testeador de faros de vehículos},
        pdfkeywords = {firmware, microcontrolador, Arduino, PWM, aplicación, frontend, C, Python, QT},
        pdfproducer = {pdflatex}
    }
\usepackage[stable]{footmisc}
\usepackage{pdfpages}
\usepackage[fixlanguage]{babelbib}

\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}
\setlength{\headheight}{1.5\headheight}

\makeatletter
\def\clearpage{
    \ifvmode
        \ifnum \@dbltopnum =\m@ne
            \ifdim \pagetotal <\topskip
                \hbox{}
            \fi
        \fi
    \fi
    \newpage
    \thispagestyle{empty}
    \write\m@ne{}
    \vbox{}
    \penalty -\@Mi
}
\makeatother

\begin{document}

    \input{chapters/portada1.tex}
    \input{chapters/portada2.tex}

    \cleardoublepage
    \thispagestyle{empty}

    \input{chapters/prefacio.tex}

    \frontmatter
    \tableofcontents
    \listoffigures
    \listoftables

    \mainmatter
    \setlength{\parskip}{5pt}

    \input{chapters/1_introduccion.tex}
    \input{chapters/2_estado_del_arte.tex}
    \input{chapters/3_planificacion.tex}
    \input{chapters/4_firmware.tex}
    \input{chapters/5_interfaz.tex}
    \input{chapters/6_presupuesto.tex}
    \input{chapters/7_conclusiones_y_trabajos_futuros.tex}

    \bibliographystyle{bababbrv-fl}
    \bibliography{bibliografia}

    \chapter*{}
    \thispagestyle{empty}

\end{document}
